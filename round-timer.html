<link rel="import" href="bower_components/polymer/polymer.html">

<dom-module id="round-timer">
  <style>
    :host {
    }
  </style>

  <template>
    <a role="button" class="pure-button" id="timerBtn" href="" on-tap="handleTap">60s</a>
  </template>

  <script>
    Polymer({
      is: "round-timer",
      properties: {
        timeLimit: {
          type: Number
        }
      },
      ready: function() {
        this.$.timerBtn.innerHTML = this.timeLimit + 's';
      },
      handleTap: function(e) {
        this.$.timerBtn.innerHTML = "&#10074;&#10074;";
        e.preventDefault();
        return;
      }
    });
    // <img data-state="pause" data-src="media.svg" class="iconic" alt="media" />
    /*
      var timerbtn = document.getElementById('timer-btn');
  timerbtn.addEventListener("click", function() {
    timerbtn.innerHTML = '&#10074;&#10074;';
    timer.toggle();
  });*/
function start() {
  var time = timeLimit;
  var myElement = document.getElementById('timer-btn');
  timer = new Timer(function() {
    time--;
    myElement.innerHTML = time + 's';
  }, function() {
    myElement.innerHTML = '0s';
    nextPlayer();
    timer.pause();
  }, timeLimit * 1000);
}
    function Timer(cbUpdate, cbEnd, delay) {
      var timeoutId, timerId, start, paused, remaining = delay;

      this.toggle = function() {
        if (paused) {
          this.resume();
        } else {
          this.pause();
        }
      }

      this.pause = function() {
        paused = true;
        window.clearTimeout(timeoutId);
        window.clearInterval(timerId);
        remaining -= new Date() - start;
      };

      this.resume = function() {
        paused = false;
        start = new Date();
        window.clearTimeout(timeoutId);
        window.clearInterval(timerId);
        timeoutId = window.setTimeout(cbEnd, remaining);
        timerId = window.setInterval(cbUpdate, 1000);
      };

      this.resume();
    }
  </script>

</dom-module>
